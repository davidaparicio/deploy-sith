{{- if .Values.secretsStore.create -}}
apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: vault-james-secret
  labels:
    {{- include "balrog.labels" . | nindent 4 }}
spec:
 provider: vault
 parameters:
   roleName: csi
   vaultAddress: {{ .Values.secretsStore.vaultAddress }}
   objects: |
     - objectName: "secret"
       secretPath: "secret/data/james-secret"
       secretKey: "secret"
{{- end }}